# π’¬ Linux Chat
### π“ μ†κ°
> ####  **π’¬ TCP/IP κΈ°λ°μ μ†μΌ“ ν†µμ‹ μ„ μ‚¬μ©ν•λ” λ¦¬λ…μ¤ epoll κΈ°λ°μ λΉ„λ™κΈ° λ©€ν‹°μ¤λ λ“ μ±„ν… μ„λ²„μ…λ‹λ‹¤.**

- epoll λ©”μ»¤λ‹μ¦μ΄ ν•΄λ‹Ή μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•  μ¤€λΉ„κ°€ λ μ†μΌ“μ„ μ‹λ³„ν•©λ‹λ‹¤. μ¤€λΉ„λ μ†μΌ“μ μ΄λ²¤νΈλ” μ¤λ λ“ν’€λ΅ μ „λ‹¬λμ–΄ μ²λ¦¬λ©λ‹λ‹¤. 
- μ¤λ λ“ν’€μ€ μ—¬λ¬ κ°μ μ¤λ λ“λ¥Ό ν¬ν•¨ν•κ³  μμΌλ©°, κ° μ¤λ λ“λ” λ…λ¦½μ μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μ²λ¦¬ν•©λ‹λ‹¤.

### π“ μ‹¤ν–‰ μμƒ
https://youtu.be/si3rGMB3ydk

### π“ μ‹¤ν–‰ λ°©λ²•
1. μ»΄νμΌν•κΈ°
```
g++ -o server server.cpp -lpthread -std=c++11

g++ -o client client.cpp -lpthread -std=c++11
```

2. μ‹¤ν–‰ν•κΈ° (μ„λ²„κ°€ μ‹¤ν–‰λ μƒνƒμ—μ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ…μ¥ν•΄μ•Ό ν•©λ‹λ‹¤)
```
./server

./client
```
### π“ κ°λ° ν™κ²½

C++, CentOS 7, g++, VMware, Visual Studio Code

### π“ κµ¬ν„ κΈ°λ¥
- ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— μ—°κ²°ν•μ—¬ μ‹¤μ‹κ°„μΌλ΅ λ©”μ‹μ§€λ¥Ό μ£Όκ³ λ°›μ„ μ μμµλ‹λ‹¤.
- μ„λ²„λ” μ¤λ λ“ ν’€μ„ μ‚¬μ©ν•μ—¬ κ° ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ λ³‘λ ¬λ΅ μ²λ¦¬ν•©λ‹λ‹¤.
- μ±„ν… κΈ°λ¥
  - μ…μ¥ μ‹ μ΄λ¦„ μ‘μ„± (μ¤‘λ³µ μ²΄ν¬)
  - λ©”μ‹μ§€ μ†΅μμ‹  μ‹κ°
  - μ „μ²΄ λ©”μ‹μ§€ 
  - κ·“μ†λ§ λ©”μ‹μ§€ (λ…λ Ήμ–΄ : `/whisper β€™κ·“μ†λ§ μƒλ€β€™ β€λ€ν™”λ‚΄μ©β€™`)
  - μ±„ν…λ°©μ— μλ” μ „μ› μ΄λ¦„ μ΅°ν (λ…λ Ήμ–΄ : `/list`)
  - μ΄λ¦„ λ°”κΎΈκΈ° (λ…λ Ήμ–΄ : `/name β€λ°”κΎΈκ³  μ‹¶μ€ μ΄λ¦„β€`)

### π“ μ„λ²„ μ½”λ“μ—μ„μ μ¤λ λ“ν’€ μ‚¬μ© λ°©μ‹

- μ„λ²„ μ΄κΈ°ν™” μ‹ `ThreadPool` κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ΄λ• μ¤λ λ“ν’€μ ν¬κΈ°λ¥Ό μ§€μ •ν•©λ‹λ‹¤. μ΄ ν¬κΈ°λ” μ„λ²„κ°€ λ™μ‹μ— μ²λ¦¬ν•  μ μλ” μµλ€ μ”μ²­ μλ¥Ό κ²°μ •ν•©λ‹λ‹¤.
- μ„λ²„μ λ©”μΈ λ£¨ν”„μ—μ„ `epoll_wait` λ¥Ό μ‚¬μ©ν•μ—¬ μ΄λ²¤νΈλ¥Ό λ€κΈ°ν•©λ‹λ‹¤.
- μ΄λ²¤νΈκ°€ λ°μƒν•λ©΄, μ—°κ²° μ”μ²­ μ²λ¦¬(`accept_connections`) λλ” ν΄λΌμ΄μ–ΈνΈ μ”μ²­ μ²λ¦¬(`handle_client`) μ‘μ—…μ„ μ¤λ λ“ν’€μ ν(`tasks`)μ— μ¶”κ°€ν•©λ‹λ‹¤.
- κ° μ”μ²­μ€ μ‘μ—… νμ— μ¶”κ°€λκ³ , μ‚¬μ© κ°€λ¥ν• μ¤λ λ“μ— μν•΄ μμ°¨μ μΌλ΅ μ²λ¦¬λ©λ‹λ‹¤. μ¤λ λ“ν’€μ—μ„ λ€κΈ° μ¤‘μΈ μ¤λ λ“κ°€ μ΄ μ‘μ—…μ„ κ°€μ Έκ°€ μ²λ¦¬ν•©λ‹λ‹¤. 
- μ²λ¦¬κ°€ μ™„λ£λλ©΄ μ¤λ λ“λ” λ‹¤μ μ‘μ—…μ„ μ„ν•΄ λ‹¤μ‹ λ€κΈ° μƒνƒλ΅ λμ•„κ°‘λ‹λ‹¤.

### π“ κ³ λ―Όν• μ 
> #### **π’¬ _μ¤λ λ“λ¥Ό μ–΄λ–»κ² ν• λ‹Ήν• κΉ?_**

μ΄κΈ° μ„λ²„ μ„¤κ³„μ—μ„λ” κ° ν΄λΌμ΄μ–ΈνΈ μ—°κ²°μ— μ¤λ λ“ ν•λ‚λ¥Ό κ³ μ •μΌλ΅ ν• λ‹Ήν•λ” κµ¬μ΅°λ¥Ό κ³ λ ¤ν–μµλ‹λ‹¤. μ΄ κµ¬μ΅°μ—μ„ μ¤λ λ“λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ† μΆ…λ£λ¥Ό ν•  λ•κΉμ§€ μ „λ‹΄ν•μ—¬, μ…λ ¥μ΄ μ—†λ” λ™μ•μ—λ„ λ‹¤λ¥Έ μ‘μ—…μ— μ¬ν• λ‹Ήλ  μ μ—†μ—μµλ‹λ‹¤. μ΄λ” λΉ„ν¨μ¨μ μΈ μμ› μ‚¬μ©μΌλ΅ μ΄μ–΄μ΅κ³ , ν΄λΌμ΄μ–ΈνΈκ°€ λ§μ„μλ΅ μ„λ²„μ μ¤λ λ“ μμ›μ΄ μ†μ§„λλ” λ¬Έμ κ°€ μμµλ‹λ‹¤.

μ΄λ¬ν• λ‹¨μ μ€ κ·Ήλ³µν•λ, ν™•μ¥μ„±κ³Ό λ³‘λ ¬ μ²λ¦¬ λ¥λ ¥μ„ κ°–μ¶”κΈ° μ„ν•΄μ„ μ €λ” **_μ‘μ—… κΈ°λ° μ¤λ λ“ ν• λ‹Ή_**  λ¨λΈμ„ μ„ νƒν–μµλ‹λ‹¤. μ΄λ¬ν• μ ‘κ·Όμ—μ„λ” μ¤λ λ“κ°€ νΉμ • ν΄λΌμ΄μ–ΈνΈμ— κ³ μ •λλ” κ²ƒμ΄ μ•„λ‹λΌ, μ”μ²­λ μ‘μ—…(=ν¨ν‚·)μ„ μ²λ¦¬ν•  λ•λ§ ν• λ‹Ήλ©λ‹λ‹¤. μ²λ¦¬κ°€ μ™„λ£λλ©΄ μ¤λ λ“λ” μ¦‰μ‹ μ¤λ λ“ ν’€λ΅ λ°ν™λμ–΄ λ‹¤μ μ‘μ—…μ„ κΈ°λ‹¤λ¦½λ‹λ‹¤. μ΄ λ¨λΈμ€ μ¤λ λ“μ™€ ν΄λΌμ΄μ–ΈνΈ μ—°κ²°μ„ λ¶„λ¦¬ν•¨μΌλ΅μ¨, μ„λ²„μ ν™•μ¥μ„±κ³Ό μμ› ν™μ©λ„κ°€ λ†’λ„λ΅ κ°μ„ ν–μµλ‹λ‹¤. 

κ²°κ³Όμ μΌλ΅, μ¤λ λ“ μκ°€ ν΄λΌμ΄μ–ΈνΈ μμ™€ λ…λ¦½μ μ΄ λμ–΄, μ΄λ΅ μƒ λ¬΄ν•μ— κ°€κΉμ΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ ‘μ†ν•  μ μλ„λ΅ ν•μ€μµλ‹λ‹¤. μ‹¤μ  ν…μ¤νΈλ¥Ό ν†µν•΄, μΏΌν„° μ½”μ–΄ ν™κ²½μ—μ„ 4κ°μ μ¤λ λ“λ¥Ό λ§λ“¤μ—μ„ λ• λ™μ‹μ— 50κ°μ ν΄λΌμ΄μ–ΈνΈκ°€ λ¬Έμ μ—†μ΄ μ ‘μ†ν•κ³  μ±„ν…ν•λ” κ²ƒμ„ ν™•μΈν–μµλ‹λ‹¤.

> #### **π’¬ _μ¤λ λ“ κ°„μ μ•μ „ν• μ‘μ—… ν μ ‘κ·Όμ„ κµ¬ν„ν•λ ¤λ©΄?_**
μ„λ²„λ” μ¤λ λ“ ν’€μ„ μ‚¬μ©ν•μ—¬ μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈ μ—°κ²°μ„ λ™μ‹μ— κ΄€λ¦¬ν•κ³ , ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ λ³‘λ ¬λ΅ μ²λ¦¬ν•λ„λ΅ μ„¤κ³„ν–μµλ‹λ‹¤. κ²½μ μƒνƒλ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄ μ¤λ λ“ ν’€ λ‚΄μ μ‘μ—… νμ— λ€ν• μ¤λ λ“ μ•μ „ν• μ ‘κ·Όμ„ λ³΄μ¥ν•©λ‹λ‹¤. κ° μ¤λ λ“λ” λ®¤ν…μ¤λ¥Ό ν†µν•΄ νμ— λ€ν• μ ‘κ·Όμ„ λ™κΈ°ν™”ν•κ³ , μ΅°κ±΄ λ³€μλ¥Ό μ‚¬μ©ν•μ—¬ μ‘μ—…μ΄ μμ„ λ•κΉμ§€ λ€κΈ°ν•©λ‹λ‹¤. μ¤λ λ“ ν’€μ— μλ” μ‘μ—… νμ— μ‘μ—…μ„ μ¶”κ°€ν•κ³ , κ° μ¤λ λ“κ°€ μ΅°κ±΄ λ³€μλ¥Ό μ‚¬μ©ν•μ—¬ λ€κΈ°ν•λ‹¤κ°€ μ‘μ—…μ„ κ°€μ Έμ™€ μ‹¤ν–‰ν•λ” λ°©μ‹μΌλ΅ μ‚¬μ© κ°€λ¥ν• μ¤λ λ“μ— μ‘μ—…μ„ λ¶„λ°°ν–μµλ‹λ‹¤.


### π“ μ„¤κ³„ λ‹¤μ΄μ–΄κ·Έλ¨
![image](https://github.com/strurao/LinuxChat/assets/126440235/270ed830-132b-473a-a62f-5311a895342a)

### π“ μ‹¤ν–‰ μΊ΅μ³ ν™”λ©΄
<img width="1057" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2024-01-27 α„‹α…©α„’α…® 3 13 55" src="https://github.com/strurao/LinuxChat/assets/126440235/be751a52-f14d-4d0f-ba9e-5d4f2804f078">
